#!/usr/bin/env python

def options(opt):
	pass

def configure(conf):
	conf.define('BT_THREADSAFE',1)

def build(bld):
	SRCS = [
		'BroadphaseCollision/btAxisSweep3.cpp',
		'BroadphaseCollision/btBroadphaseProxy.cpp',
		'BroadphaseCollision/btCollisionAlgorithm.cpp',
		'BroadphaseCollision/btDbvt.cpp',
		'BroadphaseCollision/btDbvtBroadphase.cpp',
		'BroadphaseCollision/btDispatcher.cpp',
		'BroadphaseCollision/btOverlappingPairCache.cpp',
		'BroadphaseCollision/btQuantizedBvh.cpp',
		'BroadphaseCollision/btSimpleBroadphase.cpp',
		'CollisionDispatch/btActivatingCollisionAlgorithm.cpp',
		'CollisionDispatch/btBoxBoxCollisionAlgorithm.cpp',
		'CollisionDispatch/btBox2dBox2dCollisionAlgorithm.cpp',
		'CollisionDispatch/btBoxBoxDetector.cpp',
		'CollisionDispatch/btCollisionDispatcher.cpp',
		'CollisionDispatch/btCollisionDispatcherMt.cpp',
		'CollisionDispatch/btCollisionObject.cpp',
		'CollisionDispatch/btCollisionWorld.cpp',
		'CollisionDispatch/btCollisionWorldImporter.cpp',
		'CollisionDispatch/btCompoundCollisionAlgorithm.cpp',
		'CollisionDispatch/btCompoundCompoundCollisionAlgorithm.cpp',
		'CollisionDispatch/btConvexConcaveCollisionAlgorithm.cpp',
		'CollisionDispatch/btConvexConvexAlgorithm.cpp',
		'CollisionDispatch/btConvexPlaneCollisionAlgorithm.cpp',
		'CollisionDispatch/btConvex2dConvex2dAlgorithm.cpp',
		'CollisionDispatch/btDefaultCollisionConfiguration.cpp',
		'CollisionDispatch/btEmptyCollisionAlgorithm.cpp',
		'CollisionDispatch/btGhostObject.cpp',
		'CollisionDispatch/btHashedSimplePairCache.cpp',
		'CollisionDispatch/btInternalEdgeUtility.cpp',
		'CollisionDispatch/btManifoldResult.cpp',
		'CollisionDispatch/btSimulationIslandManager.cpp',
		'CollisionDispatch/btSphereBoxCollisionAlgorithm.cpp',
		'CollisionDispatch/btSphereSphereCollisionAlgorithm.cpp',
		'CollisionDispatch/btSphereTriangleCollisionAlgorithm.cpp',
		'CollisionDispatch/btUnionFind.cpp',
		'CollisionDispatch/SphereTriangleDetector.cpp',
		'CollisionShapes/btBoxShape.cpp',
		'CollisionShapes/btBox2dShape.cpp',
		'CollisionShapes/btBvhTriangleMeshShape.cpp',
		'CollisionShapes/btCapsuleShape.cpp',
		'CollisionShapes/btCollisionShape.cpp',
		'CollisionShapes/btCompoundShape.cpp',
		'CollisionShapes/btConcaveShape.cpp',
		'CollisionShapes/btConeShape.cpp',
		'CollisionShapes/btConvexHullShape.cpp',
		'CollisionShapes/btConvexInternalShape.cpp',
		'CollisionShapes/btConvexPointCloudShape.cpp',
		'CollisionShapes/btConvexPolyhedron.cpp',
		'CollisionShapes/btConvexShape.cpp',
		'CollisionShapes/btConvex2dShape.cpp',
		'CollisionShapes/btConvexTriangleMeshShape.cpp',
		'CollisionShapes/btCylinderShape.cpp',
		'CollisionShapes/btEmptyShape.cpp',
		'CollisionShapes/btHeightfieldTerrainShape.cpp',
		'CollisionShapes/btMiniSDF.cpp',
		'CollisionShapes/btMinkowskiSumShape.cpp',
		'CollisionShapes/btMultimaterialTriangleMeshShape.cpp',
		'CollisionShapes/btMultiSphereShape.cpp',
		'CollisionShapes/btOptimizedBvh.cpp',
		'CollisionShapes/btPolyhedralConvexShape.cpp',
		'CollisionShapes/btScaledBvhTriangleMeshShape.cpp',
		'CollisionShapes/btSdfCollisionShape.cpp',
		'CollisionShapes/btShapeHull.cpp',
		'CollisionShapes/btSphereShape.cpp',
		'CollisionShapes/btStaticPlaneShape.cpp',
		'CollisionShapes/btStridingMeshInterface.cpp',
		'CollisionShapes/btTetrahedronShape.cpp',
		'CollisionShapes/btTriangleBuffer.cpp',
		'CollisionShapes/btTriangleCallback.cpp',
		'CollisionShapes/btTriangleIndexVertexArray.cpp',
		'CollisionShapes/btTriangleIndexVertexMaterialArray.cpp',
		'CollisionShapes/btTriangleMesh.cpp',
		'CollisionShapes/btTriangleMeshShape.cpp',
		'CollisionShapes/btUniformScalingShape.cpp',
		'Gimpact/btContactProcessing.cpp',
		'Gimpact/btGenericPoolAllocator.cpp',
		'Gimpact/btGImpactBvh.cpp',
		'Gimpact/btGImpactCollisionAlgorithm.cpp',
		'Gimpact/btGImpactQuantizedBvh.cpp',
		'Gimpact/btGImpactShape.cpp',
		'Gimpact/btTriangleShapeEx.cpp',
		'Gimpact/gim_box_set.cpp',
		'Gimpact/gim_contact.cpp',
		'Gimpact/gim_memory.cpp',
		'Gimpact/gim_tri_collision.cpp',
		'NarrowPhaseCollision/btContinuousConvexCollision.cpp',
		'NarrowPhaseCollision/btConvexCast.cpp',
		'NarrowPhaseCollision/btGjkConvexCast.cpp',
		'NarrowPhaseCollision/btGjkEpa2.cpp',
		'NarrowPhaseCollision/btGjkEpaPenetrationDepthSolver.cpp',
		'NarrowPhaseCollision/btGjkPairDetector.cpp',
		'NarrowPhaseCollision/btMinkowskiPenetrationDepthSolver.cpp',
		'NarrowPhaseCollision/btPersistentManifold.cpp',
		'NarrowPhaseCollision/btRaycastCallback.cpp',
		'NarrowPhaseCollision/btSubSimplexConvexCast.cpp',
		'NarrowPhaseCollision/btVoronoiSimplexSolver.cpp',
		'NarrowPhaseCollision/btPolyhedralContactClipping.cpp'
	]

	INCS = [
		'..'
	]

	bld.stlib(target = 'BulletCollision',
		features = 'cxx',
		source = SRCS,
		includes = INCS,
		install_path = bld.env.LIBDIR,
		subsystem = bld.env.MSVC_SUBSYSTEM)
