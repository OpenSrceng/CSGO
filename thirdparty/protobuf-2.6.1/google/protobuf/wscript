#!/usr/bin/env python

def options(opt):
	pass

def configure(conf):
	conf.define('GOOGLE_PROTOBUF_NO_RTTI',1)

def build(bld):
	bld.stlib(target = 'protobuf',
		features = 'cxx',
		includes = '. ../..',
		source = ([
			'descriptor_database.cc',
			'descriptor.cc',
			'descriptor.pb.cc',
			'dynamic_message.cc',
			'extension_set_heavy.cc',
			'extension_set.cc',
			'generated_message_reflection.cc',
			'generated_message_util.cc',
			'io/coded_stream.cc',
			'io/gzip_stream.cc',
			'io/printer.cc',
			'io/strtod.cc',
			'io/tokenizer.cc',
			'io/zero_copy_stream_impl_lite.cc',
			'io/zero_copy_stream_impl.cc',
			'io/zero_copy_stream.cc',
			'message_lite.cc',
			'message.cc',
			'reflection_ops.cc',
			'repeated_field.cc',
			'stubs/common.cc',
			'stubs/once.cc',
			'stubs/stringprintf.cc',
			'stubs/structurally_valid.cc',
			'stubs/strutil.cc',
			'stubs/substitute.cc',
			'text_format.cc',
			'unknown_field_set.cc',
			'wire_format_lite.cc',
			'wire_format.cc',
			'stubs/atomicops_internals_x86_gcc.cc',
			'stubs/atomicops_internals_x86_msvc.cc'
		]),
		subsystem = bld.env.MSVC_SUBSYSTEM)
